<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cyber Blackjack</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  margin:0; padding:0;
  font-family: monospace;
  background:#01010a;
  color:#00eaff;
  text-align:center;
}
h1 { text-shadow:0 0 15px #00eaff; margin-top:15px;}
.game-container {
  width: 600px;           /* bigger screen */
  max-width: 95%;
  margin: 20px auto;
  padding:30px;
  border-radius:15px;
  background:#0c0c1a;
  border:2px solid #00eaff;
  box-shadow:0 0 40px rgba(0,234,255,0.4);
}
.hand {
  display:flex;
  justify-content:center;
  gap:12px;
  min-height:150px;
  margin-bottom:20px;
}
.card {
  width:90px;             /* bigger cards */
  height:130px;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#0a0a1a;
  border:1px solid #00eaff66;
  box-shadow:0 0 12px #00eaff44;
  font-size:22px;
  transform: rotateY(90deg);
  opacity:0;
}
.card.animate {
  animation: dealCard 0.5s forwards;
}
@keyframes dealCard {
  0% { transform: translateY(-40px) rotateY(90deg); opacity:0; }
  50% { transform: translateY(-10px) rotateY(45deg); opacity:1; }
  100% { transform: translateY(0) rotateY(0deg); opacity:1; }
}
.button { padding:14px 28px; border-radius:12px; border:none; margin:5px; cursor:pointer; font-weight:bold; transition:0.2s; font-size:18px; }
.deal { background:#00eaff; color:black; }
.deal:hover { transform: scale(1.05);}
.hit { background:#00ff88; color:black; }
.hit:hover { transform: scale(1.05);}
.stand { background:#ff0066; color:white; }
.stand:hover { transform: scale(1.05);}
.money-box { font-size:22px; margin-top:15px;}
#dailyShopBtn { margin-top:15px; padding:12px 24px; background:#00eaff; color:black; border-radius:14px; cursor:pointer; font-size:18px;}
#dailyShopBtn:hover { background:#00bcd4;}
.shop-modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); display:flex; justify-content:center; align-items:center; }
.shop-content { background:#0d0d0d; border:2px solid #00eaff; padding:30px; border-radius:20px; width:360px; text-align:center; box-shadow:0 0 25px rgba(0,234,255,0.4);}
.claim-button { background:#00ff88; color:black; padding:12px 24px; margin-top:12px; border-radius:12px; cursor:pointer; font-size:16px;}
.claim-button:hover{ background:#00cc6a;}
.close-button{ background:#ff0066; color:white; padding:12px 24px; border-radius:12px; cursor:pointer; margin-top:12px; font-size:16px;}
.hidden { display:none; }
.splash {
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.9); color:#00eaff;
    display:flex; justify-content:center; align-items:center;
    font-size:48px; font-weight:bold; text-shadow:0 0 15px #00eaff;
    z-index:999; display:none;
}
.leaderboard-box {
    margin-top:20px; font-size:16px; border-top:1px solid #00eaff55; padding-top:8px;
}
</style>
</head>
<body>
<h1>CYBER BLACKJACK</h1>
<div class="game-container">
    <div class="hand" id="dealerHand"></div>
    <div class="hand" id="playerHand"></div>
    <div>
        <button class="button deal" onclick="deal()">Deal</button>
        <button class="button hit" onclick="hit()">Hit</button>
        <button class="button stand" onclick="stand()">Stand</button>
    </div>
    <div class="money-box">Money: $<span id="moneyDisplay">0</span></div>
    <div class="leaderboard-box">
        <strong>Leaderboard:</strong>
        <ol id="leaderboardList"></ol>
    </div>
</div>

<button id="dailyShopBtn">Daily Shop</button>

<div id="shopModal" class="shop-modal hidden">
    <div class="shop-content">
        <h2>Daily Shop</h2>
        <p id="shopStatus">Loading...</p>
        <button id="claimRewardBtn" class="claim-button hidden">+500 Chips</button>
        <button id="closeShopBtn" class="close-button">Close</button>
    </div>
</div>

<div id="splash" class="splash"></div>

<script>
// --------------------
// GAME VARIABLES
// --------------------
let deck=[], player=[], dealer=[];
let playerMoney=parseInt(localStorage.getItem("playerMoney"))||1000;
let leaderboard=JSON.parse(localStorage.getItem("leaderboard"))||[];
let inRound=false;

function updateMoneyUI(){
    document.getElementById("moneyDisplay").textContent=playerMoney;
    localStorage.setItem("playerMoney",playerMoney);
}
function updateLeaderboardUI(){
    leaderboard.sort((a,b)=>b-a);
    let list=document.getElementById("leaderboardList");
    list.innerHTML="";
    leaderboard.slice(0,5).forEach(v=>{ let li=document.createElement("li"); li.textContent="$"+v; list.appendChild(li); });
    localStorage.setItem("leaderboard",JSON.stringify(leaderboard));
}
updateMoneyUI();
updateLeaderboardUI();

// --------------------
// CARD UTILS
// --------------------
function newDeck(){
    let suits=["♠","♥","♦","♣"], vals=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
    deck=[];
    for(let s of suits){ for(let v of vals){ deck.push({value:v,suit:s}); } }
    deck.sort(()=>Math.random()-0.5);
}
function cardValue(c){ if(c.value==="A")return 11;if(["J","Q","K"].includes(c.value))return 10; return parseInt(c.value);}
function handValue(hand){ let t=0, aces=0; hand.forEach(c=>{ t+=cardValue(c); if(c.value==="A") aces++;}); while(t>21 && aces>0){ t-=10; aces--; } return t;}
function renderHands(){
    const dealerDiv=document.getElementById("dealerHand");
    const playerDiv=document.getElementById("playerHand");
    dealerDiv.innerHTML=""; playerDiv.innerHTML="";
    dealer.forEach(c=>{ let d=document.createElement("div"); d.className="card"; d.textContent=c.value+c.suit; dealerDiv.appendChild(d); setTimeout(()=>{d.classList.add("animate")},10);});
    player.forEach(c=>{ let d=document.createElement("div"); d.className="card"; d.textContent=c.value+c.suit; playerDiv.appendChild(d); setTimeout(()=>{d.classList.add("animate")},10);});
}

// --------------------
// GAME LOGIC
// --------------------
function deal(){
    if(inRound) return;
    inRound=true;
    newDeck();
    player=[deck.pop(),deck.pop()];
    dealer=[deck.pop(),deck.pop()];
    renderHands();
}
function hit(){
    if(!inRound) return;
    player.push(deck.pop()); renderHands();
    if(handValue(player)>21) finish("BUSTED",-100);
}
function stand(){
    if(!inRound) return;
    while(handValue(dealer)<17) dealer.push(deck.pop());
    renderHands();
    const p=handValue(player), d=handValue(dealer);
    if(p>21){ finish("BUSTED",-100); return;}
    if(d>21||p>d){ finish("YOU WIN",100);} 
    else if(p<d){ finish("YOU LOSE",-100);} 
    else{ finish("PUSH",0);}
}
function finish(msg,amount){
    inRound=false;
    playerMoney+=amount;
    updateMoneyUI();
    leaderboard.push(playerMoney);
    updateLeaderboardUI();
    showSplash(msg);
}

// --------------------
// SPLASH SCREEN
// --------------------
function showSplash(msg){
    const s=document.getElementById("splash");
    s.textContent=msg;
    s.style.display="flex";
    setTimeout(()=>{ s.style.display="none"; },1200);
}

// --------------------
// DAILY SHOP
// --------------------
const CLAIM_TIME=2*60*60*1000;
const shopBtn=document.getElementById("dailyShopBtn");
const shopModal=document.getElementById("shopModal");
const closeShop=document.getElementById("closeShopBtn");
const claimBtn=document.getElementById("claimRewardBtn");
const shopStatus=document.getElementById("shopStatus");

shopBtn.onclick=()=>{ shopModal.classList.remove("hidden"); updateShopStatus();}
closeShop.onclick=()=>{ shopModal.classList.add("hidden");}
function updateShopStatus(){
    let lastClaim=parseInt(localStorage.getItem("lastClaimTime"))||0;
    let now=Date.now();
    if(now-lastClaim>=CLAIM_TIME){
        claimBtn.classList.remove("hidden");
        shopStatus.textContent="Your reward is ready!";
    } else {
        claimBtn.classList.add("hidden");
        let t=CLAIM_TIME-(now-lastClaim);
        let h=Math.floor(t/(1000*60*60)), m=Math.floor((t%(1000*60*60))/(1000*60)), s=Math.floor((t%60000)/1000);
        shopStatus.textContent=`Next reward in ${h}h ${m}m ${s}s`;
        setTimeout(updateShopStatus,1000);
    }
}
claimBtn.onclick=()=>{
    playerMoney+=500;
    updateMoneyUI();
    localStorage.setItem("lastClaimTime",Date.now());
    updateShopStatus();
}
</script>
</body>
</html>
