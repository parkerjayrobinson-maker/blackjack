<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cyber Blackjack Ultimate</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
    margin:0;
    padding:0;
    font-family: monospace;
    background:#01010a;
    color:#00eaff;
    text-align:center;
}
h1 { text-shadow:0 0 15px #00eaff; margin-top:15px;}
.game-container {
    width: 360px;
    margin: 20px auto;
    padding:20px;
    border-radius:15px;
    background:#0c0c1a;
    border:2px solid #00eaff;
    box-shadow:0 0 20px rgba(0,234,255,0.3);
}
.hand {
    display:flex;
    justify-content:center;
    gap:8px;
    min-height:120px;
    margin-bottom:15px;
}
.card {
    width:60px;
    height:90px;
    border-radius:8px;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#0a0a1a;
    border:1px solid #00eaff66;
    box-shadow:0 0 8px #00eaff44;
    font-size:18px;
    transition:0.2s;
}
.card.animate { transform: translateY(-20px); }
.button { padding:10px 20px; border-radius:10px; border:none; margin:3px; cursor:pointer; font-weight:bold; transition:0.2s; }
.deal { background:#00eaff; color:black; }
.deal:hover { transform: scale(1.05);}
.hit { background:#00ff88; color:black; }
.hit:hover { transform: scale(1.05);}
.stand { background:#ff0066; color:white; }
.stand:hover { transform: scale(1.05);}
.money-box { font-size:18px; margin-top:10px;}
#dailyShopBtn { margin-top:10px; padding:10px 18px; background:#00eaff; color:black; border-radius:12px; cursor:pointer;}
#dailyShopBtn:hover { background:#00bcd4;}
.shop-modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); display:flex; justify-content:center; align-items:center; }
.shop-content { background:#0d0d0d; border:2px solid #00eaff; padding:25px; border-radius:18px; width:300px; text-align:center; box-shadow:0 0 20px rgba(0,234,255,0.4);}
.claim-button { background:#00ff88; color:black; padding:10px 18px; margin-top:10px; border-radius:10px; cursor:pointer;}
.claim-button:hover{ background:#00cc6a;}
.close-button{ background:#ff0066; color:white; padding:10px 18px; border-radius:10px; cursor:pointer; margin-top:10px;}
.hidden { display:none; }
.splash {
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.9); color:#00eaff;
    display:flex; justify-content:center; align-items:center;
    font-size:32px; font-weight:bold; text-shadow:0 0 10px #00eaff;
    z-index:999; display:none;
}
</style>
</head>
<body>
<h1>CYBER BLACKJACK</h1>
<div class="game-container">
    <div class="hand" id="dealerHand"></div>
    <div class="hand" id="playerHand"></div>
    <div>
        <button class="button deal" onclick="deal()">Deal</button>
        <button class="button hit" onclick="hit()">Hit</button>
        <button class="button stand" onclick="stand()">Stand</button>
    </div>
    <div class="money-box">Money: $<span id="moneyDisplay">0</span></div>
</div>

<button id="dailyShopBtn">Daily Shop</button>

<div id="shopModal" class="shop-modal hidden">
    <div class="shop-content">
        <h2>Daily Shop</h2>
        <p id="shopStatus">Loading...</p>
        <button id="claimRewardBtn" class="claim-button hidden">+500 Chips</button>
        <button id="closeShopBtn" class="close-button">Close</button>
    </div>
</div>

<div id="splash" class="splash"></div>

<script>
// --------------------
// GAME VARIABLES
// --------------------
let deck=[], player=[], dealer=[];
let playerMoney=parseInt(localStorage.getItem("playerMoney"))||1000;
let streak=parseInt(localStorage.getItem("streak"))||0;
let leaderboard=JSON.parse(localStorage.getItem("leaderboard"))||[];

function updateMoneyUI(){ document.getElementById("moneyDisplay").textContent=playerMoney; localStorage.setItem("playerMoney",playerMoney); }
updateMoneyUI();

// --------------------
// CARD UTILS
// --------------------
function newDeck(){ 
    let suits=["♠","♥","♦","♣"], vals=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
    deck=[];
    for(let s of suits){ for(let v of vals){ deck.push({value:v,suit:s}); } }
    deck.sort(()=>Math.random()-0.5);
}
function cardValue(c){ if(c.value==="A")return 11;if(["J","Q","K"].includes(c.value))return 10;return parseInt(c.value);}
function handValue(hand){ let t=0, aces=0; hand.forEach(c=>{ t+=cardValue(c); if(c.value==="A") aces++; }); while(t>21 && aces>0){t-=10; aces--;} return t;}
function renderHands(){
    const dealerDiv=document.getElementById("dealerHand");
    const playerDiv=document.getElementById("playerHand");
    dealerDiv.innerHTML=""; playerDiv.innerHTML="";
    dealer.forEach(c=>{let d=document.createElement("div"); d.className="card animate"; d.textContent=c.value+c.suit; dealerDiv.appendChild(d);});
    player.forEach(c=>{let d=document.createElement("div"); d.className="card animate"; d.textContent=c.value+c.suit; playerDiv.appendChild(d);});
}

// --------------------
// GAME LOGIC
// --------------------
let inRound=false;
function deal(){
    if(inRound) return;
    inRound=true;
    newDeck();
    player=[deck.pop(),deck.pop()];
    dealer=[deck.pop(),deck.pop()];
    renderHands();
}
function hit(){
    if(!inRound) return;
    player.push(deck.pop()); renderHands();
    if(handValue(player)>21){ finish("BUSTED",-100);}
}
function stand(){
    if(!inRound) return;
    while(handValue(dealer)<17) dealer.push(deck.pop());
    renderHands();
    const p=handValue(player), d=handValue(dealer);
    if(p>21){ finish("BUSTED",-100); return;}
    if(d>21||p>d){ finish("YOU WIN",100);} 
    else if(p<d){ finish("YOU LOSE",-100);} 
    else { finish("PUSH",0);}
}
function finish(msg,amount){
    inRound=false;
    playerMoney+=amount;
    updateMoneyUI();
    showSplash(msg);
    updateLeaderboard();
}

// --------------------
// SPLASH SCREEN
// --------------------
function showSplash(msg){
    const s=document.getElementById("splash");
    s.textContent=msg;
    s.style.display="flex";
    setTimeout(()=>{ s.style.display="none"; },1200);
}

// --------------------
// LEADERBOARD
// --------------------
function updateLeaderboard(){
    leaderboard.push(playerMoney);
    leaderboard.sort((a,b)=>b-a);
    leaderboard=leaderboard.slice(0,5);
    localStorage.setItem("leaderboard",JSON.stringify(leaderboard));
}

// --------------------
// DAILY SHOP
// --------------------
const CLAIM_TIME=2*60*60*1000;
const shopBtn=document.getElementById("dailyShopBtn");
const shopModal=document.getElementById("shopModal");
const closeShop=document.getElementById("closeShopBtn");
const claimBtn=document.getElementById("claimRewardBtn");
const shopStatus=document.getElementById("shopStatus");

shopBtn.onclick=()=>{ shopModal.classList.remove("hidden"); updateShopStatus();}
closeShop.onclick=()=>{ shopModal.classList.add("hidden");}
function updateShopStatus(){
    let lastClaim=parseInt(localStorage.getItem("lastClaimTime"))||0;
    let now=Date.now();
    if(now-lastClaim>=CLAIM_TIME){
        claimBtn.classList.remove("hidden");
        shopStatus.textContent="Your reward is ready!";
    } else {
        claimBtn.classList.add("hidden");
        let t=CLAIM_TIME-(now-lastClaim);
        let h=Math.floor(t/(1000*60*60)), m=Math.floor((t%(1000*60*60))/(1000*60)), s=Math.floor((t%60000)/1000);
        shopStatus.textContent=`Next reward in ${h}h ${m}m ${s}s`;
        setTimeout(updateShopStatus,1000);
    }
}
claimBtn.onclick=()=>{
    playerMoney+=500;
    streak++; localStorage.setItem("streak",streak);
    updateMoneyUI();
    localStorage.setItem("lastClaimTime",Date.now());
    updateShopStatus();
}
</script>
</body>
</html>
